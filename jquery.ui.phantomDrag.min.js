(function(c,e,d,b,a){c.widget("ui.phantomDrag",{options:{xmax:65536,xmin:-65536,ymax:65536,ymin:-65536,delay:13,customEasing:null,stopSpeedBorder:0.1},EVENT_DRAG_START:"phantomdrag-start",EVENT_DRAG_RELEASE:"phantomdrag-release",EVENT_DRAG_MOVE:"phantomdrag-move",EVENT_DRAG_STOP:"phantomdrag-stop",mx:0,mfx:0,my:0,mfy:0,timer:0,_init:function(){this.element.bind({mousedown:c.proxy(this._start,this)}).data("phantomdrag-x",0).data("phantomdrag-fx",0).data("phantomdrag-dx",0).data("phantomdrag-sx",0).data("phantomdrag-y",0).data("phantomdrag-fy",0).data("phantomdrag-dy",0).data("phantomdrag-sy",0)},_startTimer:function(){this.timer=a(c.proxy(this._onEnterFrame,this),16)},_stopTimer:function(){clearInterval(this.timer);this.timer=0},_start:function(g){this._stopTimer();var f=this.element.data("phantomdrag-x"),h=this.element.data("phantomdrag-y");this.element.data("phantomdrag-on",true).data("phantomdrag-dx",f).data("phantomdrag-fx",f).data("phantomdrag-dy",h).data("phantomdrag-fy",h);this.mfx=b.round(g.pageX);this.mfy=b.round(g.pageY);this.element.trigger(this.EVENT_DRAG_START);c(d).bind({mousemove:c.proxy(this._move,this),mouseup:c.proxy(this._end,this)});this._startTimer();return false},_move:function(g){var h=this.options,f=this.element;if(!f.data("phantomdrag-move")){f.data("phantomdrag-move",true)}this.mx=b.round(g.pageX);this.my=b.round(g.pageY);f.data("phantomdrag-dx",b.max(h.xmin,b.min(f.data("phantomdrag-fx")+this.mx-this.mfx,h.xmax))).data("phantomdrag-dy",b.max(h.ymin,b.min(f.data("phantomdrag-fy")+this.my-this.mfy,h.ymax)));return false},_end:function(f){this.element.data("phantomdrag-on",false).trigger(this.EVENT_DRAG_RELEASE);c(d).unbind({mousemove:this._move,mouseup:this._end})},_onEnterFrame:function(j){var r=this.element,f=this.options,h=r.data("phantomdrag-fx"),n=r.data("phantomdrag-sx"),s=r.data("phantomdrag-dx"),p=r.data("phantomdrag-x"),g=r.data("phantomdrag-fy"),m=r.data("phantomdrag-sy"),q=r.data("phantomdrag-dy"),l=r.data("phantomdrag-y"),k=null,i=f.stopSpeedBorder;n=f.customEasing?f.customEasing(p,s,n,h):(s-p)/f.delay;m=f.customEasing?f.customEasing(l,q,m,g):(q-l)/f.delay;p+=n;l+=m;k=b.abs(n)<i&&b.abs(m)<i;if(k){n=0;m=0;p=s;l=q}r.data("phantomdrag-x",p).data("phantomdrag-sx",n).data("phantomdrag-dx",s).data("phantomdrag-y",l).data("phantomdrag-sy",m).data("phantomdrag-dy",q);this.element.trigger(this.EVENT_DRAG_MOVE);if(k){this._stop()}},_stop:function(){if(!this.element.data("phantomdrag-on")){this._stopTimer();this.element.trigger(this.EVENT_DRAG_STOP);this.element.data("phantomdrag-move",false)}return false}})})(jQuery,window,document,Math,setInterval);